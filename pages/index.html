<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Axiom Bot</title>
    <link rel="stylesheet" href="styles/global.css" />
    <link rel="stylesheet" href="styles/index.css" />
  </head>
  <body>
    <div
      id="no-internet-warning"
      style="
        display: none;
        padding: 15px;
        background: #ffcccc;
        color: #900;
        text-align: center;
        z-index: 9999;
        position: relative;
      "
    >
      ‚ùå No internet connection detected. This application requires an active
      internet connection to function.
    </div>

    <div
      id="block-interaction"
      style="
        display: none;
        position: fixed;
        inset: 0;
        z-index: 9998;
        background: rgba(255, 255, 255, 0.5);
        cursor: not-allowed;
      "
    ></div>

    <main class="hero-section container">
      <img
        src="../src/assets/axiom_logo.png"
        alt="Axiom Logo"
        class="hero-logo"
      />
      <p class="hero-subtitle">üëã Welcome to Axiom Bot.</p>

      <div class="admin-wrapper">
        <a href="dashboard.html" class="menu-button" id="open-dashboard">
          <img
            src="../src/assets/dashboard.png"
            class="button-icon"
            alt="Dashboard Icon"
          />
          Open Dashboard
        </a>
      </div>

      <div class="bottom-panel">
        <nav class="hero-menu material-nav">
          <a href="#" class="menu-button" id="discord-invite">
            <img
              src="../src/assets/discord_logo.png"
              alt="Discord Icon"
              class="button-icon"
            />
            Discord Invite
          </a>
          <a href="termsofservices.html" class="menu-button" id="terms-btn">
            <img
              src="../src/assets/terms.png"
              alt="Terms Icon"
              class="button-icon"
            />
            Terms of Service
          </a>
          <a href="donates.html" class="menu-button" id="donate-btn">
            <img
              src="../src/assets/donate.png"
              alt="Donate Icon"
              class="button-icon"
            />
            Donates
          </a>
          <a href="about.html" class="menu-button" id="about-btn">
            <img
              src="../src/assets/aboutus.png"
              alt="About Icon"
              class="button-icon"
            />
            About Us
          </a>
        </nav>
      </div>
    </main>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const discordBtn = document.getElementById("discord-invite");
        const netWarn = document.getElementById("no-internet-warning");
        const block = document.getElementById("block-interaction");

        const hasApi = typeof window.api !== "undefined" && window.api !== null;

        const setOffline = () => {
          netWarn.style.display = "block";
          block.style.display = "block";
        };
        const setOnline = () => {
          netWarn.style.display = "none";
          block.style.display = "none";
        };

        const isOnline = () => {
          try {
            if (hasApi && typeof window.api.isOnline === "function") {
              return window.api.isOnline();
            }
          } catch {}
          return navigator.onLine;
        };

        if (!isOnline()) setOffline();
        else setOnline();

        if (hasApi && typeof window.api.onNetworkChange === "function") {
          window.api.onNetworkChange(setOnline, setOffline);
        } else {
          window.addEventListener("online", setOnline);
          window.addEventListener("offline", setOffline);
        }

        discordBtn?.addEventListener("click", async (e) => {
          e.preventDefault();
          try {
            if (hasApi && typeof window.api.getOwnerConfig === "function") {
              const config = await window.api.getOwnerConfig();
              if (config?.GUILD_INVITE_URL) {
                if (typeof window.api.openExternal === "function") {
                  window.api.openExternal(config.GUILD_INVITE_URL);
                } else {
                  window.open(config.GUILD_INVITE_URL, "_blank");
                }
                return;
              }
            }
            alert("Discord invite URL not set. Please configure it in setup.");
          } catch {
            alert("Could not open Discord invite.");
          }
        });
      });
    </script>
  </body>
</html>
